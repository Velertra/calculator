<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Calculator</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="calculator">
        <div class ="calc-base">
          <form> 
             <output id="result" name="result" >0</output>
            </form>
            <div class="numbers">
                <button class="number" type="button">1</button>
                <button class="number" type="button">2</button>
                <button class="number" type="button">3</button>
                <button class="number" type="button">4</button>
                <button class="number" type="button">5</button>
                <button class="number" type="button">6</button>
                <button class="number" type="button">7</button>
                <button class="number" type="button">8</button>
                <button class="number" type="button">9</button>
                <button class="number" type="button">0</button>
            </div>    
            <div class = "operators">    
                <button class="operator" type="button">+</button>
                <button class="operator" type="button">-</button>
                <button class="operator" type="button">*</button>
                <button class="operator" type="button">/</button>
                <button class="operator" type="button">=</button>
                <button class="operator" type="button">C</button>
            </div>
        </div>    
    </div>

	<script>
       
        let btns = document.querySelectorAll('.number');

        let btns2 = document.querySelectorAll('.operator');
        

        

        let numberBtn = btns.forEach.call(btns, function(btn) {               
            btn.addEventListener('click', function(event) {         //buttons are hit, call buttonHit funct
               let newnew = Number(this.innerText)
               buttonHit(newnew)
                })
            });

            

        let operatorBtn = btns2.forEach.call(btns2, function(btn) {        
            btn.addEventListener('click', function(event) {    //click on 
            let newnew2 = this.innerText
            buttonHit(newnew2)          
            })
        });
            
            function display(x){
                document.getElementById("result").innerHTML = x;
            };

let base = 0;

let a = null;
let b = null;
let c = ''
            function buttonHit(x) {
               if (x == '=') {
                let result = Number(output2.join(''))
                b += result
                operate(a, b, c)
                display(finalResult)
                a = null;
                b = null;
                c = '';
                output = [];
                output2 = [];
               } else if (x == 'C' ) {
                a = null;
                b = null;
                c = '';
                output = [];
                output2 = [];
                display('0')
                } else if (a == undefined && typeof x === 'number' && x !== '=') {
                    storeNum(x)
                    
                } else if (typeof x === 'string' && a == undefined && x !== '=') {
                  let result = Number(output.join(''))
                    a += result
                    display(a)
                    c = x
                    
                } else if (typeof x === 'number' && c !== undefined && x !== '=') {
                    storeNum(x)
                } else if (b == undefined && typeof x === 'string' && x !== '=') {
                    let result = Number(output2.join(''))
                    b += result
                    display(b)
                    operate(a,b,c);
                    a = finalResult;
                    b = null;
                    c = x;
                    output = [];
                    output2 = [];
                } 
                

            }


 let output = [];
 let output2 = []

            function storeNum(x) {
           
                if (a == undefined) {        //turn number 1st # into array
                    output.push(x)
                   
                
            } else if (c !== undefined){
                output2.push(x)
                    
                }
              
              
        }

        

    function finalfunc() {
        operate(a, b, c)        
    }


        /*
    function makeArrays(obj) {
        for(let i = 0; i < creation.length; i++) {
            if (typeof obj === 'number') {
            fullNumber.push(obj)      
            console.log(fullNumber)
        } else if (typeof obj === 'string') {
                if(obj === '+' || '-' || '/' || '*') {
           
                let newer = fullNumber.join('')
                creation.push(newer);
                creation.push(obj);
                
            }
        } 
    }
    };
   */
    

    function finishArr() {
        console.log()

    }

/*
    function starter(obj){
        
        if (typeof obj == 'number') {
            let newer = fullNumber.push(obj)    // creating the array 'fullNumber'
                
         if (typeof obj == 'string') {       //uses 'fullNumber' + obj to create another array 'creation'
            let other = Number(fullNumber.join(''))               
            
                creation.push(other)     
                creation.push(obj)
                console.log(creation)
                if (2 > creation.length) {
                    
                  
                   //  arraymove(creation, [1], [2])
                }
 } 
                }

            
    };
    function arraymove(arr, fromIndex, toIndex) {
    var element = arr[fromIndex];               //moves array
    arr.splice(fromIndex, 1);
    arr.splice(toIndex, 0, element);
    console.log(arr)
}

*/
let finalResult = 0;


        function add(array) {
            let total = array.reduce((a, b) => a + b) 
            finalResult = total

        } 

        function subtract(array) {
           let total = array.reduce((a, b) => a - b)        // functions used to run math problems
           finalResult = total
        } 

        function multiply(array) {
            let total = array.reduce((a, b) => a * b) 
            finalResult = total
        }

        function divided(array) {
            let total = array.reduce((a, b) => a / b) 
            finalResult = total
        
        }

        

        function operate(a, b, c) {
       let convert = Array.from(arguments).slice(0, 2);         //function that takes a,b,c and converts
         let output = 0                                         //into array to use math functions
    try{
        switch(c) {
            case '+':
                output = add(convert)
                break;
            
            case '*':
                output = multiply(convert)
                break;
            case '-':
                output = subtract(convert)
                break;
            case '/':
                if (b === 0) {
                    throw "can't divide by 0!"
                }  else {
                    output = divided(convert)
                }
                break;
        }
    }
    catch(e) {
        console.log("There's an error: ", e)
    }
    return output
}


    </script>
  </body>
</html>